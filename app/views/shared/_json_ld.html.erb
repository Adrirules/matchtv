<script type="application/ld+json">
  <%= {
    "@context": "https://schema.org",
    "@type": "SportsEvent",
    "name": "#{match.home_team} - #{match.away_team}",
    "description": "Retrouvez sur quelle chaîne et à quelle heure voir le match #{match.home_team} vs #{match.away_team} en direct pour la #{match.competition}. Guide TV complet et streaming.",
    "startDate": match.start_time.iso8601,
    "endDate": (match.start_time + 110.minutes).iso8601,
    "eventStatus": "https://schema.org/EventScheduled",
    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
    "image": [match.home_team_logo, match.away_team_logo].reject(&:blank?),
    "sport": "Football",
    "homeTeam": {
      "@type": "SportsTeam",
      "name": match.home_team,
      "logo": match.home_team_logo,
      "url": "https://www.coupdenvoi.tv/equipes/#{match.home_team&.parameterize}"
    },
    "awayTeam": {
      "@type": "SportsTeam",
      "name": match.away_team,
      "logo": match.away_team_logo,
      "url": "https://www.coupdenvoi.tv/equipes/#{match.away_team&.parameterize}"
    },
    "performer": [
      { "@type": "SportsTeam", "name": match.home_team },
      { "@type": "SportsTeam", "name": match.away_team }
    ],
    "location": {
      "@type": "Place",
      "name": match.competition || "Stade de football",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "France",
        "addressCountry": "FR"
      }
    },
    "offers": {
      "@type": "Offer",
      "url": "https://www.coupdenvoi.tv/matches/#{match.matchup&.slug || match.id}",
      "price": "0",
      "priceCurrency": "EUR",
      "availability": "https://schema.org/InStock",
      "validFrom": (match.created_at || Time.current).iso8601
    }
  }.to_json.html_safe %>
</script>
