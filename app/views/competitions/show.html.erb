<% content_for :title, "Programme TV #{@competition_name} : match ce soir et cette semaine" %>
<% content_for :meta_description, "Sur quelle chaîne voir la #{@competition_name} ? Liste complète des matchs, horaires et diffuseurs TV." %>

<nav style="margin: 15px 10px;">
  <%= link_to "← Toutes les compétitions", competitions_path, style: "color: #777; text-decoration: none; font-size: 13px;" %>
</nav>

<div style="padding: 0 10px;">
  <div style="display: flex; align-items: center; margin-bottom: 30px;">
    <h1 style="font-size: 22px; font-weight: 800; margin: 0;"><%= @competition_name %></h1>
    <span style="margin-left: 10px; background: #e7f3ff; color: #007bff; padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: 700;">LIVE</span>
  </div>

  <% if @matches.any? %>
    <% @matches.each do |match| %>
      <%= link_to match_path(match.matchup), style: "text-decoration: none; color: inherit; display: block;" do %>
        <div style="background: white; border: 1px solid #f0f0f0; border-radius: 12px; padding: 16px; margin-bottom: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.03);">

          <%# Header du match %>
          <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
            <div style="font-weight: 800; font-size: 14px; color: #222;"><%= match.start_time.strftime("%d/%m — %H:%M") %></div>
            <div style="font-size: 12px; color: #d9534f; font-weight: 700;"><%= match.tv_channels %></div>
          </div>

          <%# Équipes et Logos %>
          <div style="display: flex; align-items: center; justify-content: space-between;">
            <div style="flex: 1; display: flex; align-items: center;">
              <img src="<%= match.home_team_logo %>" style="width: 25px; height: 25px; object-fit: contain; margin-right: 8px;">
              <span style="font-weight: 600; font-size: 15px;"><%= match.home_team %></span>
            </div>

            <div style="padding: 0 10px; color: #ccc; font-size: 12px; font-weight: bold;">VS</div>

            <div style="flex: 1; display: flex; align-items: center; justify-content: flex-end;">
              <span style="font-weight: 600; font-size: 15px; text-align: right;"><%= match.away_team %></span>
              <img src="<%= match.away_team_logo %>" style="width: 25px; height: 25px; object-fit: contain; margin-left: 8px;">
            </div>
          </div>
        </div>
      <% end %>
    <% end %>
  <% else %>
    <div style="text-align: center; padding: 40px 20px; background: #f9f9f9; border-radius: 12px;">
      <p style="color: #666;">Aucun match prévu prochainement pour cette compétition.</p>
    </div>
  <% end %>
</div>
